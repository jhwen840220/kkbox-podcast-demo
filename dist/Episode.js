"use strict";(self.webpackChunkkkbox_podcast_demo=self.webpackChunkkkbox_podcast_demo||[]).push([[696],{9914:(e,s,o)=>{o.r(s),o.d(s,{default:()=>S});var t=o(6252),i=o(3577);const n={key:0},l={class:"m-l-xl m-b-xs"},d={class:"fz-16"},a={class:"fz-30 fz-bold"},c=(0,t._)("p",{class:"fz-20 fz-bold"},"本集介紹",-1),p=["innerHTML"];var r=o(2262),u=o(8810),m=o(894),y=o(8903);const f=(0,t._)("p",{class:"fz-24 fz-bold"},"很抱歉，並未找到匹配的集數",-1);var _=o(6093);const g={name:"Button",props:{svgIconName:{type:String,default:""},text:{type:String,default:""}},components:{Icon:_.Z}};var E=o(3744);const v={$style:{btn:"Button_btn-Ej2j7","btn-primary":"Button_btn-primary-z2Y54"}},I=(0,E.Z)(g,[["render",function(e,s,o,n,l,d){const a=(0,t.up)("Icon");return(0,t.wg)(),(0,t.iD)("div",{class:(0,i.C_)([e.$style.btn,e.$style["btn-primary"],"p-x-lg p-y-xs d-flex align-items-center justify-content-centet fz-16"])},[o.svgIconName?((0,t.wg)(),(0,t.j4)(a,{key:0,name:o.svgIconName,svgClass:"m-r-xs"},null,8,["name"])):(0,t.kq)("",!0),(0,t.Uk)(" "+(0,i.zw)(o.text),1)],2)}],["__cssModules",v]]),k={name:"EmptyEpisode",components:{Button:I},setup:()=>({})},b={$style:{"empty-episode":"EmptyEpisode_empty-episode-aAyvr"}};const h={name:"EpisodeContainer",components:{EmptyEpisode:(0,E.Z)(k,[["render",function(e,s,o,n,l,d){const a=(0,t.up)("Button"),c=(0,t.up)("router-link");return(0,t.wg)(),(0,t.iD)("div",{class:(0,i.C_)([e.$style["empty-episode"],"d-flex flex-column align-items-center justify-content-center"])},[f,(0,t.Wm)(c,{to:"/"},{default:(0,t.w5)((()=>[(0,t.Wm)(a,{class:"m-t-lg",text:"回首頁"})])),_:1})],2)}],["__cssModules",b]]),LazyLoadImage:o(5722).Z,Button:I},setup(){const e=(0,u.yj)(),s=(0,m.oR)(),o=(0,r.iH)(!1),i=(0,r.iH)(null),n=(0,r.iH)({title:"",desc:"",imgSrc:""}),l=(0,r.Fl)((()=>s.state.episodeList)),d=(0,r.Fl)((()=>s.state.episodeInfo)),a=(0,r.iH)(!0),c=()=>{const s=l.value.get(e.params.id);if(s){n.value=s;const o=Array.from(l.value).find((s=>s[0]==e.params.id))[1].title;window.document.title=`${o} | KKBOX podcast`}else a.value=!1};(0,t.bv)((()=>{document.body.scrollTop=0,(0,y.Sr)({target:i.value,callback:e=>{o.value=!(e[0].intersectionRatio>.5)},options:{root:null,threshold:.5}}),l.value&&(c(),p.value=d.value.episodeId===e.params.id)})),(0,t.YP)(l,(()=>{c()}));const p=(0,r.iH)(!1);return(0,t.YP)((()=>d.value.episodeId),(()=>{p.value=d.value.episodeId===e.params.id})),{episodeInfoRef:i,shouldEpisodeInfoSticky:o,currentEpisodeInfo:n,channelInfo:(0,r.Fl)((()=>s.state.channelInfo)),hasEpisodeInfo:a,isCurrentEpisode:p,onTogglePlay:()=>{p.value?s.commit("SET_IS_RESTART",!0):(s.commit("SET_EPISODE_INFO",{...n.value,episodeId:e.params.id}),p.value=d.value.episodeId===e.params.id)}}}},x={$style:{observer:"Episode_observer-MbMh1","episode-section":"Episode_episode-section-gJQHR","episode-section-small":"Episode_episode-section-small-W2U81","episode-logo":"Episode_episode-logo-Ckmm0","episode-logo-small":"Episode_episode-logo-small-dYbF8","desc-section-sticky":"Episode_desc-section-sticky-c36EK"}},S=(0,E.Z)(h,[["render",function(e,s,o,r,u,m){const y=(0,t.up)("LazyLoadImage"),f=(0,t.up)("Button"),_=(0,t.up)("EmptyEpisode");return r.hasEpisodeInfo?((0,t.wg)(),(0,t.iD)("div",n,[(0,t._)("div",{class:(0,i.C_)([e.$style.observer,"position-absolute"]),ref:"episodeInfoRef"},null,2),(0,t._)("section",{class:(0,i.C_)([e.$style["episode-section"],"p-md d-flex",r.shouldEpisodeInfoSticky?[e.$style["episode-section-small"],"position-sticky p-t-md align-items-center"]:["align-items-end"]])},[(0,t._)("div",{class:(0,i.C_)([e.$style["episode-logo"],r.shouldEpisodeInfoSticky?[e.$style["episode-logo-small"]]:[]])},[(0,t.Wm)(y,{src:r.currentEpisodeInfo.imgSrc,alt:r.currentEpisodeInfo.title,width:r.shouldEpisodeInfoSticky?75:150,height:r.shouldEpisodeInfoSticky?75:150},null,8,["src","alt","width","height"])],2),(0,t._)("div",l,[(0,t._)("p",d,(0,i.zw)(r.channelInfo.name),1),(0,t._)("p",a,(0,i.zw)(r.currentEpisodeInfo.title),1)]),(0,t.Wm)(f,{text:r.isCurrentEpisode?"重新播放":"播放",svgIconName:"play-svgo",class:(0,i.C_)([r.shouldEpisodeInfoSticky?"m-t-md":"m-b-sm","m-l-xl"]),onClick:r.onTogglePlay},null,8,["text","class","onClick"])],2),(0,t._)("section",{class:(0,i.C_)([r.shouldEpisodeInfoSticky?e.$style["desc-section-sticky"]:"","p-y-md"])},[c,(0,t._)("article",{class:"m-t-lg",innerHTML:r.currentEpisodeInfo.desc},null,8,p)],2)])):((0,t.wg)(),(0,t.j4)(_,{key:1}))}],["__cssModules",x]])}}]);